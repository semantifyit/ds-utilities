!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).DsUtil=e()}}((function(){var e={};Object.defineProperty(e,"__esModule",{value:!0}),e.getDsSpecificationVersion=void 0,e.getDsSpecificationVersion=function(e){if(!Array.isArray(e["@graph"]))throw new Error("The given DS has no @graph array, which is expected for any DS version.");try{const t=e["@graph"].find(e=>"ds:DomainSpecification"===e["@type"]);if(t)return t["ds:version"]}catch(t){}try{if(e["@graph"].find(e=>Array.isArray(e["@type"])&&e["@type"].includes("sh:NodeShape")&&e["@type"].includes("schema:CreativeWork")))return"5.0"}catch(t){}throw new Error("The DS specification version for the given DS could not been determined - the DS has an unexpected structure.")};var t={};Object.defineProperty(t,"__esModule",{value:!0}),t.prettyPrintCompactedIRIs=void 0,t.prettyPrintCompactedIRIs=function e(t){return Array.isArray(t)?t.map(e).join(" + "):t.startsWith("schema:")?t.substring("schema:".length):t};var r={};Object.defineProperty(r,"__esModule",{value:!0}),r.extractSdoVersionNumber=void 0,r.extractSdoVersionNumber=function(e){if(e.includes("schema.org/docs/")){const t=/.*schema\.org\/docs\/releases\.html#v([0-9.]+)(\/)?/g.exec(e);if(t&&t[1])return t[1]}else if(e.includes("schema.org/version/")){const t=/.*schema\.org\/version\/([0-9.]+)(\/)?/g.exec(e);if(t&&t[1])return t[1]}throw new Error("The given url did not fit the expected format for a schema.org version url.")};var a={};Object.defineProperty(a,"__esModule",{value:!0}),a.DsUtilitiesBase=void 0,a.DsUtilitiesBase=class{constructor(){this.getDsSpecificationVersion=e.getDsSpecificationVersion,this.prettyPrintCompactedIRIs=t.prettyPrintCompactedIRIs,this.extractSdoVersionNumber=r.extractSdoVersionNumber}getDsUtilitiesVersion(){return this.dsUtilitiesVersion}};var s={};Object.defineProperty(s,"__esModule",{value:!0}),s.getDsRootNode=void 0,s.getDsRootNode=function(e){if(!e["@graph"])throw new Error("The given DS has no @graph array, which is mandatory for a DS in DS-V7 format.");const t=e["@graph"].find(e=>"ds:DomainSpecification"===e["@type"]);if(!t)throw new Error("The given DS has no identifiable root node in DS-V7 format.");return t};var o={};Object.defineProperty(o,"__esModule",{value:!0}),o.getDsId=void 0,o.getDsId=function(e){const t=(0,s.getDsRootNode)(e);if(!t["@id"])throw new Error("The given DS has no @id for its root node, which is mandatory for a DS in DS-V7 format.");return t["@id"]};var n={};function i(e){return void 0===e?e:JSON.parse(JSON.stringify(e))}function d(e){return e instanceof Object&&!(e instanceof Array)}Object.defineProperty(n,"__esModule",{value:!0}),n.isObject=n.deepEqual=n.reorderNodeWithSchema=n.getLanguageString=n.cloneJson=void 0,n.cloneJson=i,n.getLanguageString=function(e,t){if(!Array.isArray(e))throw new Error("Given valuesArray parameter is not an array, as expected");if(t){const r=e.find(e=>e["@language"]===t);if(r&&r["@value"])return r["@value"]}else if(e[0]&&e[0]["@value"])return e[0]["@value"]},n.reorderNodeWithSchema=function(e,t){const r=i(e);for(const a of Object.keys(e))delete e[a];for(const a of t){const t=a.term;void 0!==r[t]&&(e[t]=r[t])}for(const a of Object.keys(r))void 0===t.find(e=>e.term===a)&&(e[a]=r[a])},n.deepEqual=function e(t,r){const a=Object.keys(t),s=Object.keys(r);if(a.length!==s.length)return!1;for(const o of a){const a=t[o],s=r[o],n=d(a)&&d(s);if(n&&!e(a,s)||!n&&a!==s)return!1}return!0},n.isObject=d;var h={};Object.defineProperty(h,"__esModule",{value:!0}),h.getDsName=void 0,h.getDsName=function(e,t){const r=(0,s.getDsRootNode)(e);if(r["schema:name"])return(0,n.getLanguageString)(r["schema:name"],t)};var p={};Object.defineProperty(p,"__esModule",{value:!0}),p.standardContext=void 0,p.standardContext={ds:"https://vocab.sti2.at/ds/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"https://schema.org/",sh:"http://www.w3.org/ns/shacl#",xsd:"http://www.w3.org/2001/XMLSchema#","ds:propertyDisplayOrder":{"@container":"@list","@type":"@id"},"ds:subDSOf":{"@type":"@id"},"ds:usedVocabulary":{"@type":"@id"},"sh:targetClass":{"@type":"@id"},"sh:targetObjectsOf":{"@type":"@id"},"sh:targetSubjectsOf":{"@type":"@id"},"sh:class":{"@type":"@id"},"sh:path":{"@type":"@id"},"sh:datatype":{"@type":"@id"},"sh:equals":{"@type":"@id"},"sh:disjoint":{"@type":"@id"},"sh:lessThan":{"@type":"@id"},"sh:lessThanOrEquals":{"@type":"@id"},"sh:in":{"@container":"@list"},"sh:languageIn":{"@container":"@list"},"sh:or":{"@container":"@list"}};var c={};Object.defineProperty(c,"__esModule",{value:!0}),c.getDsStandardContext=void 0,c.getDsStandardContext=function(){return(0,n.cloneJson)(p.standardContext)};var u={};Object.defineProperty(u,"__esModule",{value:!0}),u.getDsDescription=void 0,u.getDsDescription=function(e,t){const r=(0,s.getDsRootNode)(e);if(r["schema:description"])return(0,n.getLanguageString)(r["schema:description"],t)};var y={};Object.defineProperty(y,"__esModule",{value:!0}),y.getDsAuthorName=void 0,y.getDsAuthorName=function(e){const t=(0,s.getDsRootNode)(e);if(t["schema:author"]&&t["schema:author"]["schema:name"])return t["schema:author"]["schema:name"]};var l={};Object.defineProperty(l,"__esModule",{value:!0}),l.getDsSchemaVersion=void 0,l.getDsSchemaVersion=function(e){const t=(0,s.getDsRootNode)(e);if(!t["schema:schemaVersion"])throw new Error("The given DS has no schema:schemaVersion for its root node, which is mandatory for a DS in DS-V7 format.");return t["schema:schemaVersion"]};var m={};Object.defineProperty(m,"__esModule",{value:!0}),m.getDsVersion=void 0,m.getDsVersion=function(e){const t=(0,s.getDsRootNode)(e);if(t["schema:version"])return t["schema:version"]};var f={};Object.defineProperty(f,"__esModule",{value:!0}),f.getDsExternalVocabularies=void 0,f.getDsExternalVocabularies=function(e){const t=(0,s.getDsRootNode)(e);return t["ds:usedVocabulary"]?(0,n.cloneJson)(t["ds:usedVocabulary"]):[]};var g={};Object.defineProperty(g,"__esModule",{value:!0}),g.getDsTargetClasses=void 0,g.getDsTargetClasses=function(e){const t=(0,s.getDsRootNode)(e);return t["sh:targetClass"]?(0,n.cloneJson)(t["sh:targetClass"]):[]};let{urlAlphabet:T}={urlAlphabet:"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"},v=e=>crypto.getRandomValues(new Uint8Array(e));var D=(e,t=21)=>((e,t,r)=>{let a=(2<<Math.log(e.length-1)/Math.LN2)-1,s=-~(1.6*a*t/e.length);return(o=t)=>{let n="";for(;;){let t=r(s),i=s;for(;i--;)if((n+=e[t[i]&a]||"").length===o)return n}}})(e,t,v),S={};Object.defineProperty(S,"__esModule",{value:!0}),S.generateInnerNodeId=void 0,S.generateInnerNodeId=function(e){let t,r;e&&(t=(0,o.getDsId)(e));const a=D("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",5);do{r=a()}while(void 0!==e&&JSON.stringify(e).includes(t+"#"+r));return r};var b={};Object.defineProperty(b,"__esModule",{value:!0}),b.nodeSchemaRoot=void 0,b.nodeSchemaRoot=[{term:"@id",required:!0,valueType:"string"},{term:"@type",required:!0,valueType:"string",value:"ds:DomainSpecification"},{term:"ds:subDSOf",required:!1,valueType:"string"},{term:"sh:targetClass",required:!1,valueType:"array"},{term:"sh:targetObjectsOf",required:!1,valueType:"string"},{term:"sh:targetSubjectsOf",required:!1,valueType:"string"},{term:"sh:class",required:!1,valueType:"array"},{term:"schema:name",required:!1,valueType:"array"},{term:"schema:description",required:!1,valueType:"array"},{term:"schema:author",required:!1,valueType:"object"},{term:"ds:version",required:!0,valueType:"string"},{term:"schema:version",required:!1,valueType:"string"},{term:"schema:schemaVersion",required:!0,valueType:"string"},{term:"ds:usedVocabulary",required:!1,valueType:"array"},{term:"sh:closed",required:!1,valueType:"boolean"},{term:"ds:propertyDisplayOrder",required:!1,valueType:"array"},{term:"sh:property",required:!0,valueType:"array"}];var N={};Object.defineProperty(N,"__esModule",{value:!0}),N.nodeSchemaProperty=void 0,N.nodeSchemaProperty=[{term:"@type",required:!0,valueType:"string",value:"sh:PropertyShape"},{term:"sh:order",required:!1,valueType:"integer"},{term:"sh:path",required:!0,valueType:"string"},{term:"rdfs:label",required:!1,valueType:"array"},{term:"rdfs:comment",required:!1,valueType:"array"},{term:"sh:minCount",required:!1,valueType:"integer"},{term:"sh:maxCount",required:!1,valueType:"integer"},{term:"sh:equals",required:!1,valueType:"array"},{term:"sh:disjoint",required:!1,valueType:"array"},{term:"sh:lessThan",required:!1,valueType:"array"},{term:"sh:lessThanOrEquals",required:!1,valueType:"array"},{term:"sh:or",required:!0,valueType:"array"}];var x={};Object.defineProperty(x,"__esModule",{value:!0}),x.nodeSchemaEnumeration=void 0,x.nodeSchemaEnumeration=[{term:"@id",required:!0,valueType:"string"},{term:"@type",required:!0,valueType:"string",value:"sh:NodeShape"},{term:"sh:class",required:!0,valueType:"array"},{term:"rdfs:label",required:!1,valueType:"array"},{term:"rdfs:comment",required:!1,valueType:"array"},{term:"sh:in",required:!1,valueType:"array"}];var E={};Object.defineProperty(E,"__esModule",{value:!0}),E.nodeSchemaClass=void 0,E.nodeSchemaClass=[{term:"@id",required:!0,valueType:"string"},{term:"@type",required:!0,valueType:"string",value:"sh:NodeShape"},{term:"sh:class",required:!0,valueType:"array"},{term:"rdfs:label",required:!1,valueType:"array"},{term:"rdfs:comment",required:!1,valueType:"array"},{term:"sh:closed",required:!1,valueType:"boolean"},{term:"ds:propertyDisplayOrder",required:!1,valueType:"array"},{term:"sh:property",required:!1,valueType:"array"}];var w={};Object.defineProperty(w,"__esModule",{value:!0}),w.nodeSchemaDs=void 0,w.nodeSchemaDs=[{term:"@context",required:!0,valueType:"object"},{term:"@graph",required:!0,valueType:"array"}];var _={};Object.defineProperty(_,"__esModule",{value:!0}),_.nodeSchemaContext=void 0,_.nodeSchemaContext=function(){const e=[];for(const t of Object.keys(p.standardContext)){const r={term:t,required:!0,valueType:"string"};"string"!=typeof p.standardContext[t]&&(r.valueType="object"),r.value=p.standardContext[t],e.push(r)}return e}();var P={};Object.defineProperty(P,"__esModule",{value:!0}),P.nodeSchemaDataType=void 0,P.nodeSchemaDataType=[{term:"sh:datatype",required:!0,valueType:"string",valueIn:["xsd:string","rdf:langString","rdf:HTML","xsd:boolean","xsd:date","xsd:dateTime","xsd:time","xsd:double","xsd:integer","xsd:float","xsd:anyURI"]},{term:"rdfs:label",required:!1,valueType:"array"},{term:"rdfs:comment",required:!1,valueType:"array"},{term:"sh:defaultValue",required:!1,valueType:"any"},{term:"ds:defaultLanguage",required:!1,valueType:"string"},{term:"sh:minExclusive",required:!1,valueType:"any"},{term:"sh:minInclusive",required:!1,valueType:"any"},{term:"sh:maxExclusive",required:!1,valueType:"any"},{term:"sh:maxInclusive",required:!1,valueType:"any"},{term:"sh:minLength",required:!1,valueType:"integer"},{term:"sh:maxLength",required:!1,valueType:"integer"},{term:"sh:pattern",required:!1,valueType:"array"},{term:"sh:flag",required:!1,valueType:"string"},{term:"sh:languageIn",required:!1,valueType:"array"},{term:"ds:hasLanguage",required:!1,valueType:"array"},{term:"sh:uniqueLang",required:!1,valueType:"boolean"},{term:"sh:in",required:!1,valueType:"array"},{term:"sh:hasValue",required:!1,valueType:"array"}];var O={};Object.defineProperty(O,"__esModule",{value:!0}),O.nodeSchemaLanguageTaggedString=void 0,O.nodeSchemaLanguageTaggedString=[{term:"@language",required:!0,valueType:"string"},{term:"@value",required:!0,valueType:"string"}];var G={};Object.defineProperty(G,"__esModule",{value:!0}),G.nodeSchemaEnumerationMember=void 0,G.nodeSchemaEnumerationMember=[{term:"@id",required:!0,valueType:"string"},{term:"rdfs:label",required:!1,valueType:"array"},{term:"rdfs:comment",required:!1,valueType:"array"}];var j={};Object.defineProperty(j,"__esModule",{value:!0}),j.reorderDsNode=void 0,j.reorderDsNode=function(e){if(!(0,n.isObject)(e))throw new Error("The given input was not an object, as required.");if(e["@type"])switch(e["@type"]){case"ds:DomainSpecification":(0,n.reorderNodeWithSchema)(e,b.nodeSchemaRoot);break;case"sh:PropertyShape":(0,n.reorderNodeWithSchema)(e,N.nodeSchemaProperty);break;case"sh:NodeShape":e["sh:in"]?(0,n.reorderNodeWithSchema)(e,x.nodeSchemaEnumeration):(0,n.reorderNodeWithSchema)(e,E.nodeSchemaClass)}else e["@context"]?(0,n.reorderNodeWithSchema)(e,w.nodeSchemaDs):e.ds&&e.schema&&e.sh?(0,n.reorderNodeWithSchema)(e,_.nodeSchemaContext):e["sh:datatype"]?(0,n.reorderNodeWithSchema)(e,P.nodeSchemaDataType):e["sh:node"]||(e["@value"]?(0,n.reorderNodeWithSchema)(e,O.nodeSchemaLanguageTaggedString):e["@id"]&&(0,n.reorderNodeWithSchema)(e,G.nodeSchemaEnumerationMember))};var M={};Object.defineProperty(M,"__esModule",{value:!0}),M.dsGrammarNodeTypes=void 0,M.dsGrammarNodeTypes={ds:"DomainSpecification",context:"Context",root:"RootNode",classStandard:"StandardClass",classRestricted:"RestrictedClass",enumerationStandard:"StandardEnumeration",enumerationRestricted:"RestrictedEnumeration",property:"Property",dataType:"DataType",enumerationMember:"EnumerationMember",reference:"Reference"};var q={};function I(e,t,r,a){const o=t.split("/"),n=e.find(e=>e["sh:path"]===o[0]);if(!n)throw new Error("Could not find a fitting property-node for path-token "+o[0]);return 1===o.length?n:function(e,t,r,a){const o=(0,s.getDsRootNode)(r),n=t.split("."),i=n[0];let d,h;if(i.startsWith("@")?"@$"===i?(d=e.find(e=>e["sh:node"]&&e["sh:node"]["@id"]===o["@id"]),h=o):i.startsWith("@#")?(d=e.find(e=>e["sh:node"]&&e["sh:node"]["@id"]===o["@id"]+i.substring(1)))&&(h=r["@graph"].find(e=>e["@id"]===(null==d?void 0:d["sh:node"]["@id"]))):(d=e.find(e=>e["sh:node"]&&e["sh:node"]["@id"].endsWith(i.substring(1))))&&(h=r["@graph"].find(e=>e["@id"]===(null==d?void 0:d["sh:node"]["@id"]))):d=e.find(e=>{return e["sh:datatype"]===n[0]||e["sh:node"]&&e["sh:node"]["sh:class"]&&(t=e["sh:node"]["sh:class"],r=n[0].split(","),!t.find(e=>!r.includes(e))&&!r.find(e=>!t.includes(e)))||e["sh:node"]&&e["sh:node"]["@id"].endsWith(n[0].substring(1));var t,r}),!d)throw new Error("Could not find a fitting range-node for path-token "+n[0]);return 1===n.length?a&&h?h:d["sh:node"]?d["sh:node"]:d:I(h?h["sh:property"]:d["sh:node"]["sh:property"],t.substring(n[0].length+1),r,a)}(n["sh:or"],t.substring(o[0].length+1),r,a)}Object.defineProperty(q,"__esModule",{value:!0}),q.dsPathGetNode=void 0,q.dsPathGetNode=function(e,t,r=!1){if("@context"===t){if(!e["@context"])throw new Error("The given DS has no @context, which is mandatory for a DS in DS-V7 format.");return e["@context"]}if(t.startsWith("$")){const a=(0,s.getDsRootNode)(e);return"$"===t?a:I(a["sh:property"],t.substring(2),e,r)}{const a=t.split("."),s=e["@graph"].find(e=>e["@id"].endsWith(a[0]));if(!s)throw new Error("Could not find a fitting reference definition for path-token "+a[0]);return 1===a.length?s:I(s["sh:property"],t.substring(a[0].length+1),e,r)}};var R={};Object.defineProperty(R,"__esModule",{value:!0}),R.identifyDsGrammarNodeType=void 0,R.identifyDsGrammarNodeType=function e(t,r,a){const o=(0,s.getDsRootNode)(r),i=(0,q.dsPathGetNode)(r,"@context");if((0,n.deepEqual)(t,i))return M.dsGrammarNodeTypes.context;if((0,n.deepEqual)(t,o))return M.dsGrammarNodeTypes.root;if("sh:PropertyShape"===t["@type"])return M.dsGrammarNodeTypes.property;if(t["sh:datatype"])return M.dsGrammarNodeTypes.dataType;if("sh:NodeShape"===t["@type"]){if(t["sh:property"])return M.dsGrammarNodeTypes.classRestricted;if(t["sh:in"])return M.dsGrammarNodeTypes.enumerationRestricted;if(1!==t["sh:class"].length||!a)return M.dsGrammarNodeTypes.classStandard;try{return a.getEnumeration(t["sh:class"][0]),M.dsGrammarNodeTypes.enumerationStandard}catch(d){return M.dsGrammarNodeTypes.classStandard}}if(t["@id"]){const s=r["@graph"].find(e=>t["@id"]===e["@id"]);return s?e(s,r,a):M.dsGrammarNodeTypes.enumerationMember}throw new Error("Could not find a match for the given DS Node.")};var V={};function C(e){if((0,j.reorderDsNode)(e),k(e,"schema:name"),k(e,"schema:description"),k(e,"rdfs:label"),k(e,"rdfs:comment"),e["sh:property"])for(const t of e["sh:property"])A(t)}function A(e){(0,j.reorderDsNode)(e),k(e,"rdfs:label"),k(e,"rdfs:comment");for(const t of e["sh:or"])(0,j.reorderDsNode)(t),k(t,"rdfs:label"),k(t,"rdfs:comment"),t["sh:node"]&&C(t["sh:node"])}function k(e,t){e[t]&&function(e){for(const t of e)(0,n.reorderNodeWithSchema)(t,O.nodeSchemaLanguageTaggedString)}(e[t])}Object.defineProperty(V,"__esModule",{value:!0}),V.reorderDs=void 0,V.reorderDs=function(e){if(!(0,n.isObject)(e))throw new Error("The given input was not an object, as required.");(0,n.reorderNodeWithSchema)(e,w.nodeSchemaDs),(0,n.reorderNodeWithSchema)(e["@context"],_.nodeSchemaContext);const t=e["@graph"].findIndex(e=>"ds:DomainSpecification"===e["@type"]);0!==t&&(e["@graph"]=[e["@graph"][t],...e["@graph"].slice(0,t),...e["@graph"].slice(t+1)]);for(const r of e["@graph"])C(r)};var W={};Object.defineProperty(W,"__esModule",{value:!0}),W.dataTypeMappingToLabel=W.dataTypeMapping=W.dataTypesDs=W.dataTypesSchema=void 0,W.dataTypesSchema={text:"schema:Text",url:"schema:URL",number:"schema:Number",integer:"schema:Integer",float:"schema:Float",boolean:"schema:Boolean",time:"schema:Time",date:"schema:Date",dateTime:"schema:DateTime"},W.dataTypesDs={string:"xsd:string",langString:"rdf:langString",url:"xsd:anyURI",html:"rdf:HTML",double:"xsd:double",integer:"xsd:integer",float:"xsd:float",boolean:"xsd:boolean",time:"xsd:time",date:"xsd:date",dateTime:"xsd:dateTime"},W.dataTypeMapping={[W.dataTypesDs.string]:W.dataTypesSchema.text,[W.dataTypesDs.langString]:W.dataTypesSchema.text,[W.dataTypesDs.html]:W.dataTypesSchema.text,[W.dataTypesDs.boolean]:W.dataTypesSchema.boolean,[W.dataTypesDs.date]:W.dataTypesSchema.date,[W.dataTypesDs.dateTime]:W.dataTypesSchema.dateTime,[W.dataTypesDs.time]:W.dataTypesSchema.time,[W.dataTypesDs.double]:W.dataTypesSchema.number,[W.dataTypesDs.integer]:W.dataTypesSchema.integer,[W.dataTypesDs.float]:W.dataTypesSchema.float,[W.dataTypesDs.url]:W.dataTypesSchema.url},W.dataTypeMappingToLabel={[W.dataTypesDs.string]:"Text",[W.dataTypesDs.langString]:"Localized Text",[W.dataTypesDs.html]:"HTML Text",[W.dataTypesDs.boolean]:"Boolean",[W.dataTypesDs.date]:"Date",[W.dataTypesDs.dateTime]:"DateTime",[W.dataTypesDs.time]:"Time",[W.dataTypesDs.double]:"Number",[W.dataTypesDs.integer]:"Integer",[W.dataTypesDs.float]:"Float",[W.dataTypesDs.url]:"URL"};var L={};Object.defineProperty(L,"__esModule",{value:!0}),L.getDataTypeLabel=void 0,L.getDataTypeLabel=function(e){const t=W.dataTypeMappingToLabel[e];if(!t)throw new Error("Given input '"+e+"' is not a valid xsd/rdf datatype in DS-V7.");return t};var U={};Object.defineProperty(U,"__esModule",{value:!0}),U.getDsDataTypeForSchemaDataType=void 0,U.getDsDataTypeForSchemaDataType=function(e){const t=Object.keys(W.dataTypeMapping).find(t=>W.dataTypeMapping[t]===e);if(!t)throw new Error("Given input '"+e+"' is not a valid schema.org datatype in DS-V7.");return t};var F={};Object.defineProperty(F,"__esModule",{value:!0}),F.getSchemaDataTypeForDsDataType=void 0,F.getSchemaDataTypeForDsDataType=function(e){const t=W.dataTypeMapping[e];if(!t)throw new Error("Given input '"+e+"' is not a valid xsd/rdf datatype in DS-V7.");return t};var J={};Object.defineProperty(J,"__esModule",{value:!0}),J.pathGrammarNodeTypes=J.pathGrammarNodeTypeDataType=J.pathGrammarNodeTypeEnumeration=J.pathGrammarNodeTypeClass=J.pathGrammarNodeTypeProperty=J.pathGrammarNodeTypeReferenceInternalExternal=J.pathGrammarNodeTypeReferenceExternal=J.pathGrammarNodeTypeReferenceInternal=J.pathGrammarNodeTypeReferenceRoot=J.pathGrammarNodeTypeDefinitionInternalExternal=J.pathGrammarNodeTypeDefinitionExternal=J.pathGrammarNodeTypeDefinitionInternal=J.pathGrammarNodeTypeRoot=J.pathGrammarNodeTypeContext=void 0,J.pathGrammarNodeTypeContext="Context",J.pathGrammarNodeTypeRoot="RootNode",J.pathGrammarNodeTypeDefinitionInternal="InternalReferenceDefinition",J.pathGrammarNodeTypeDefinitionExternal="ExternalReferenceDefinition",J.pathGrammarNodeTypeDefinitionInternalExternal="InternalExternalReferenceDefinition",J.pathGrammarNodeTypeReferenceRoot="RootReference",J.pathGrammarNodeTypeReferenceInternal="InternalReference",J.pathGrammarNodeTypeReferenceExternal="ExternalReference",J.pathGrammarNodeTypeReferenceInternalExternal="InternalExternalReference",J.pathGrammarNodeTypeProperty="Property",J.pathGrammarNodeTypeClass="Class",J.pathGrammarNodeTypeEnumeration="Enumeration",J.pathGrammarNodeTypeDataType="DataType",J.pathGrammarNodeTypes={context:J.pathGrammarNodeTypeContext,root:J.pathGrammarNodeTypeRoot,defInt:J.pathGrammarNodeTypeDefinitionInternal,defExt:J.pathGrammarNodeTypeDefinitionExternal,defIntExt:J.pathGrammarNodeTypeDefinitionInternalExternal,refRoot:J.pathGrammarNodeTypeReferenceRoot,refInt:J.pathGrammarNodeTypeReferenceInternal,refExt:J.pathGrammarNodeTypeReferenceExternal,refIntExt:J.pathGrammarNodeTypeReferenceInternalExternal,property:J.pathGrammarNodeTypeProperty,class:J.pathGrammarNodeTypeClass,enumeration:J.pathGrammarNodeTypeEnumeration,dataType:J.pathGrammarNodeTypeDataType};var $={};Object.defineProperty($,"__esModule",{value:!0}),$.dsPathInit=void 0,$.dsPathInit=function(e=J.pathGrammarNodeTypes.root,t){switch(e){case J.pathGrammarNodeTypes.root:return"$";case J.pathGrammarNodeTypes.defInt:return"#"+(null==t?void 0:t.split("#")[1]);case J.pathGrammarNodeTypes.defExt:case J.pathGrammarNodeTypes.defIntExt:return t.split("/").pop();case J.pathGrammarNodeTypes.context:return"@context";default:throw new Error("Unknown node type to initialize a DS Path: "+e)}};var B={};Object.defineProperty(B,"__esModule",{value:!0}),B.dsPathAddition=void 0,B.dsPathAddition=function(e,t,r){if(t===J.pathGrammarNodeTypes.property)return e+"."+r;if(t===J.pathGrammarNodeTypes.dataType)return e+"/"+r;if(t===J.pathGrammarNodeTypes.class||t===J.pathGrammarNodeTypes.enumeration)return e+"/"+r.join(",");if(t===J.pathGrammarNodeTypes.refRoot)return e+"/@$";if(t===J.pathGrammarNodeTypes.refInt)return e+"/@#"+r.split("#")[1];if(t===J.pathGrammarNodeTypes.refExt)return e+"/@"+r.split("/").pop();if(t===J.pathGrammarNodeTypes.refIntExt)return e+"/@"+r.split("/").pop();throw new Error("Given additionType '"+t+"' unknown to function dsPathAddition().")};var z={};Object.defineProperty(z,"__esModule",{value:!0}),z.dsPathIdentifyNodeType=void 0,z.dsPathIdentifyNodeType=function(e,t){const r=(0,s.getDsRootNode)(t),a=(0,q.dsPathGetNode)(t,"@context");if((0,n.deepEqual)(e,a))return J.pathGrammarNodeTypes.context;if(e["@id"]&&1===Object.keys(e).length)return e["@id"]===r["@id"]?J.pathGrammarNodeTypes.refRoot:e["@id"].startsWith(r["@id"])?J.pathGrammarNodeTypes.refInt:"#"===e["@id"].charAt(e["@id"].length-6)?J.pathGrammarNodeTypes.refIntExt:J.pathGrammarNodeTypes.refExt;if("ds:DomainSpecification"===e["@type"])return J.pathGrammarNodeTypes.root;if("sh:NodeShape"===e["@type"]&&void 0!==t["@graph"].find(t=>t["@id"]===e["@id"]))return e["@id"].startsWith(r["@id"])?J.pathGrammarNodeTypes.defInt:"#"===e["@id"].charAt(e["@id"].length-6)?J.pathGrammarNodeTypes.defIntExt:J.pathGrammarNodeTypes.defExt;if("sh:PropertyShape"===e["@type"])return J.pathGrammarNodeTypes.property;if(void 0!==e["sh:datatype"])return J.pathGrammarNodeTypes.dataType;if("sh:NodeShape"===e["@type"]&&void 0!==e["sh:in"])return J.pathGrammarNodeTypes.enumeration;if("sh:NodeShape"===e["@type"]&&void 0!==e["sh:property"])return J.pathGrammarNodeTypes.class;if("sh:NodeShape"===e["@type"]&&void 0!==e["sh:class"])return J.pathGrammarNodeTypes.class;throw new Error("Could not identify a valid Path Grammar Node Type for the given input.")};var H={};function X(e,r,a,s){const o=(0,q.dsPathGetNode)(e,a,!0),n=(0,q.dsPathGetNode)(e,a,!1),i=(0,R.identifyDsGrammarNodeType)(o,e),d=(0,z.dsPathIdentifyNodeType)(n,e);let h;return{token:r,label:h="@context"===r?"@context":d===J.pathGrammarNodeTypes.property?(0,t.prettyPrintCompactedIRIs)(o["sh:path"]):d===J.pathGrammarNodeTypes.dataType?(0,L.getDataTypeLabel)(o["sh:datatype"]):(0,t.prettyPrintCompactedIRIs)(o["sh:class"]),grammarNodeType:i,dsPathNodeType:d,currentPath:a,restPath:s}}Object.defineProperty(H,"__esModule",{value:!0}),H.tokenizeDsPath=void 0,H.tokenizeDsPath=function(e,t){let r="",a=t;const s=[];for(;""!==a;){let o;if(a===t&&a.startsWith("$"))o="$";else if(a===t&&a.startsWith("@context"))o="@context";else if(a===t&&a.startsWith("#")){const e=a.indexOf(".");o=a.substring(0,-1!==e?e:void 0)}else if(a!==t||t.startsWith("#")||t.startsWith("@")||t.startsWith("$"))if(a.startsWith(".")){const e=a.indexOf("/");o=a.substring(0,-1!==e?e:void 0)}else{if(!a.startsWith("/"))throw new Error("Could not find a valid token match for '"+a+"'.");{const e=a.indexOf(".");o=a.substring(0,-1!==e?e:void 0)}}else{const e=a.indexOf(".");o=a.substring(0,-1!==e?e:void 0)}r+=o,a=a.substring(o.length),s.push(X(e,o,r,a))}return s};var K={};Object.defineProperty(K,"__esModule",{value:!0}),K.VerificationReport=void 0,K.VerificationReport=class{constructor(e="Valid",t=[]){this.result=e,this.errors=t}addErrorEntry(e){this.errors.push(e),this.updateResult()}updateResult(){if(this.errors.find(e=>"Error"===e.severity||"Critical"===e.severity))this.result="Invalid";else{const e=this.errors.find(e=>"Warning"===e.severity);this.result=e?"ValidWithWarnings":"Valid"}}toJson(){return JSON.parse(JSON.stringify(this))}};var Q={};Object.defineProperty(Q,"__esModule",{value:!0}),Q.ErrorEntry=void 0,Q.ErrorEntry=class{constructor(e,t,r){this.severity=e,this.path=t,this.description=r}};var Y={};function Z(e,t,r,a,s,o){let n;if(ae(r,a,t,n=o?ne(b.nodeSchemaRoot,s.nodeSchemaRoot):ne(E.nodeSchemaClass,s.nodeSchemaClass)),Array.isArray(t["sh:property"]))for(const i of t["sh:property"])te(e,i,r,(0,B.dsPathAddition)(a,J.pathGrammarNodeTypes.property,i["sh:path"]),s)}function ee(e,t,r,a,s){if(ae(r,a,t,ne(x.nodeSchemaEnumeration,s.nodeSchemaEnumeration)),Array.isArray(t["sh:in"]))for(const o of t["sh:in"])if((0,n.isObject)(o)){void 0===o["@id"]?r.addErrorEntry(new Q.ErrorEntry("Error",a,"An enumeration value has no '@id'.")):"string"!=typeof o["@id"]&&r.addErrorEntry(new Q.ErrorEntry("Error",a,"An enumeration value has an '@id' that is not a string."));for(const e of Object.keys(o))"@id"!==e&&r.addErrorEntry(new Q.ErrorEntry("Warning",a,"Additional term '"+e+" is being used."))}else r.addErrorEntry(new Q.ErrorEntry("Error",a,"An enumeration has an unexpected entry for 'sh:in'."))}function te(e,t,r,a,s){if(ae(r,a,t,ne(N.nodeSchemaProperty,s.nodeSchemaProperty)),Array.isArray(t["sh:or"]))for(const n of t["sh:or"]){let t,i,d;switch(n["sh:node"]?(t=(0,z.dsPathIdentifyNodeType)(n["sh:node"],e),i=n["sh:node"]):(t=(0,z.dsPathIdentifyNodeType)(n,e),i=n),t){case J.pathGrammarNodeTypes.class:try{d=(0,B.dsPathAddition)(a,t,i["sh:class"])}catch(o){d=a}Z(e,i,r,d,s,!1);break;case J.pathGrammarNodeTypes.enumeration:try{d=(0,B.dsPathAddition)(a,t,i["sh:class"])}catch(o){d=a}ee(0,i,r,d,s);break;case J.pathGrammarNodeTypes.dataType:try{d=(0,B.dsPathAddition)(a,t,i["sh:datatype"])}catch(o){d=a}re(e,i,r,d,s)}}}function re(e,t,r,a,s){ae(r,a,t,ne(P.nodeSchemaDataType,s.nodeSchemaDataType))}function ae(e,t,r,a){for(const o of a)if(o.required&&void 0===r[o.term])e.addErrorEntry(new Q.ErrorEntry("Error",t,"Term '"+o.term+"' is required but not used."));else if(void 0!==r[o.term]){const a=oe(r[o.term]);if(o.valueType&&"any"!==o.valueType&&a!==o.valueType){e.addErrorEntry(new Q.ErrorEntry("Error",t,"Term '"+o.term+"' requires a value with datatype '"+o.valueType+"', but has the datatype '"+a+"'."));continue}"array"===a&&0===r[o.term].length&&e.addErrorEntry(new Q.ErrorEntry("Error",t,"Term '"+o.term+"' has an empty array as value.")),o.value&&!se(r[o.term],o.value)&&e.addErrorEntry(new Q.ErrorEntry("Error",t,"Term '"+o.term+"' requires the value '"+ie(o.value)+"', but has the value '"+ie(r[o.term])+"'.")),o.valueIn&&!o.valueIn.includes(r[o.term])&&e.addErrorEntry(new Q.ErrorEntry("Error",t,"Term '"+o.term+"' must have a value from an expected set, which does not include the given value '"+ie(r[o.term])+"'."))}const s=Object.keys(r).filter(e=>!a.find(t=>t.term===e));for(const o of s)e.addErrorEntry(new Q.ErrorEntry("Warning",t,"Additional term '"+o+" is being used."))}function se(e,t){if((0,n.isObject)(e)){if(!function(e,t){const r=Object.keys(e).filter(e=>!Object.keys(t).includes(e)),a=Object.keys(t).filter(t=>!Object.keys(e).includes(t));return 0===r.length&&0===a.length}(e,t))return!1;for(const r of Object.keys(e))if(!se(e[r],t[r]))return!1;return!0}return e===t}function oe(e){if(Array.isArray(e))return"array";{const t=typeof e;return"number"===t&&Number.isInteger(e)?"integer":t}}function ne(e,t){let r=(0,n.cloneJson)(e);if(!t)return r;for(const a of t)(r=r.filter(e=>e.term!==a.term)).push((0,n.cloneJson)(a));return r}function ie(e){let t=(0,n.cloneJson)(e);return"string"!=typeof t&&(t=(t=JSON.stringify(t)).replace(/"/g,"'")),t}Object.defineProperty(Y,"__esModule",{value:!0}),Y.verifyDs=void 0,Y.verifyDs=function(e,t={}){const r=new K.VerificationReport;try{(0,n.isObject)(e)||r.addErrorEntry(new Q.ErrorEntry("Error","$","The given input was not an object, as required.")),ae(r,null,e,ne(w.nodeSchemaDs,t.nodeSchemaDs)),(0,n.isObject)(e["@context"])&&ae(r,"@context",e["@context"],ne(_.nodeSchemaContext,t.nodeSchemaContext));const a=(0,s.getDsRootNode)(e);Z(e,a,r,(0,$.dsPathInit)(),t,!0);for(const s of e["@graph"])s["@id"]!==a["@id"]&&Z(e,s,r,(0,$.dsPathInit)(J.pathGrammarNodeTypes.defInt,s["@id"]),t,!1);return r.toJson()}catch(a){return r.addErrorEntry(new Q.ErrorEntry("Critical","$","There was a critical error during the verification: "+a)),r.toJson()}};var de={};Object.defineProperty(de,"__esModule",{value:!0}),de.checkClassMatch=void 0,de.checkClassMatch=function(e,t,r){const a=[];t.map(e=>a.push(e,...r.getClass(e).getSuperClasses()));const s=Array.from(new Set(a));return e.every(e=>s.includes(e))};var he={};Object.defineProperty(he,"__esModule",{value:!0}),he.DsUtilitiesV7=void 0,he.DsUtilitiesV7=class extends a.DsUtilitiesBase{constructor(){super(),this.dsUtilitiesVersion="7.0",this.getDsRootNode=s.getDsRootNode,this.getDsStandardContext=c.getDsStandardContext,this.getDsId=o.getDsId,this.reorderDs=V.reorderDs,this.reorderDsNode=j.reorderDsNode,this.generateInnerNodeId=S.generateInnerNodeId,this.getDsDataTypeForSchemaDataType=U.getDsDataTypeForSchemaDataType,this.getSchemaDataTypeForDsDataType=F.getSchemaDataTypeForDsDataType,this.identifyDsGrammarNodeType=R.identifyDsGrammarNodeType,this.dsPathInit=$.dsPathInit,this.dsPathAddition=B.dsPathAddition,this.dsPathGetNode=q.dsPathGetNode,this.dsPathIdentifyNodeType=z.dsPathIdentifyNodeType,this.tokenizeDsPath=H.tokenizeDsPath,this.getDsName=h.getDsName,this.getDsDescription=u.getDsDescription,this.getDsAuthorName=y.getDsAuthorName,this.getDsSchemaVersion=l.getDsSchemaVersion,this.getDsVersion=m.getDsVersion,this.getDsExternalVocabularies=f.getDsExternalVocabularies,this.getDsTargetClasses=g.getDsTargetClasses,this.getDataTypeLabel=L.getDataTypeLabel,this.verifyDs=Y.verifyDs,this.checkClassMatch=de.checkClassMatch}};var pe={};Object.defineProperty(pe,"__esModule",{value:!0}),pe.getDsRootNode=void 0,pe.getDsRootNode=function(e){if(!e["@graph"])throw new Error("The given DS has no @graph array, which is mandatory for a DS in DS-V5 format.");const t=e["@graph"].find(e=>Array.isArray(e["@type"])&&e["@type"].includes("sh:NodeShape")&&e["@type"].includes("schema:CreativeWork"));if(!t)throw new Error("The given DS has no identifiable root node in DS-V5 format.");return t};var ce={};Object.defineProperty(ce,"__esModule",{value:!0}),ce.standardContext=void 0,ce.standardContext={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",sh:"http://www.w3.org/ns/shacl#",xsd:"http://www.w3.org/2001/XMLSchema#",schema:"http://schema.org/","sh:targetClass":{"@id":"sh:targetClass","@type":"@id"},"sh:property":{"@id":"sh:property"},"sh:path":{"@id":"sh:path","@type":"@id"},"sh:datatype":{"@id":"sh:datatype","@type":"@id"},"sh:node":{"@id":"sh:node"},"sh:class":{"@id":"sh:class","@type":"@id"},"sh:or":{"@id":"sh:or","@container":"@list"},"sh:in":{"@id":"sh:in","@container":"@list"},"sh:languageIn":{"@id":"sh:languageIn","@container":"@list"},"sh:equals":{"@id":"sh:equals","@type":"@id"},"sh:disjoint":{"@id":"sh:disjoint","@type":"@id"},"sh:lessThan":{"@id":"sh:lessThan","@type":"@id"},"sh:lessThanOrEquals":{"@id":"sh:lessThanOrEquals","@type":"@id"},ds:"http://vocab.sti2.at/ds/","ds:usedVocabularies":{"@id":"ds:usedVocabularies","@type":"@id"}};var ue={};Object.defineProperty(ue,"__esModule",{value:!0}),ue.getDsStandardContext=void 0,ue.getDsStandardContext=function(){return(0,n.cloneJson)(ce.standardContext)};var ye={};Object.defineProperty(ye,"__esModule",{value:!0}),ye.getDsId=void 0,ye.getDsId=function(e){if(!e["@id"])throw new Error("The given DS has no @id, which is mandatory for a DS in DS-V5 format.");return e["@id"]};var le={};Object.defineProperty(le,"__esModule",{value:!0}),le.dataTypeMapping=le.dataTypesDs=le.dataTypesSchema=void 0,le.dataTypesSchema={text:"schema:Text",url:"schema:URL",number:"schema:Number",integer:"schema:Integer",float:"schema:Float",boolean:"schema:Boolean",time:"schema:Time",date:"schema:Date",dateTime:"schema:DateTime"},le.dataTypesDs={string:"xsd:string",url:"xsd:anyURI",double:"xsd:double",integer:"xsd:integer",float:"xsd:float",boolean:"xsd:boolean",time:"xsd:time",date:"xsd:date",dateTime:"xsd:dateTime"},le.dataTypeMapping={[le.dataTypesDs.string]:le.dataTypesSchema.text,[le.dataTypesDs.boolean]:le.dataTypesSchema.boolean,[le.dataTypesDs.date]:le.dataTypesSchema.date,[le.dataTypesDs.dateTime]:le.dataTypesSchema.dateTime,[le.dataTypesDs.time]:le.dataTypesSchema.time,[le.dataTypesDs.double]:le.dataTypesSchema.number,[le.dataTypesDs.integer]:le.dataTypesSchema.integer,[le.dataTypesDs.float]:le.dataTypesSchema.float,[le.dataTypesDs.url]:le.dataTypesSchema.url},le.dataTypesDs.string,le.dataTypesDs.boolean,le.dataTypesDs.date,le.dataTypesDs.dateTime,le.dataTypesDs.time,le.dataTypesDs.double,le.dataTypesDs.integer,le.dataTypesDs.float,le.dataTypesDs.url;var me={};Object.defineProperty(me,"__esModule",{value:!0}),me.getDsDataTypeForSchemaDataType=void 0,me.getDsDataTypeForSchemaDataType=function(e){const t=Object.keys(le.dataTypeMapping).find(t=>le.dataTypeMapping[t]===e);if(!t)throw new Error("Given input '"+e+"' is not a valid schema.org datatype in DS-V5.");return t};var fe={};Object.defineProperty(fe,"__esModule",{value:!0}),fe.getSchemaDataTypeForDsDataType=void 0,fe.getSchemaDataTypeForDsDataType=function(e){const t=le.dataTypeMapping[e];if(!t)throw new Error("Given input '"+e+"' is not a valid xsd/rdf datatype in DS-V5.");return t};var ge={};Object.defineProperty(ge,"__esModule",{value:!0}),ge.getDsDescription=void 0,ge.getDsDescription=function(e){return(0,pe.getDsRootNode)(e)["schema:description"]};var Te={};Object.defineProperty(Te,"__esModule",{value:!0}),Te.getDsName=void 0,Te.getDsName=function(e){return(0,pe.getDsRootNode)(e)["schema:name"]};var ve={};Object.defineProperty(ve,"__esModule",{value:!0}),ve.getDsAuthorName=void 0,ve.getDsAuthorName=function(e){const t=(0,pe.getDsRootNode)(e);if(t["schema:author"]&&t["schema:author"]["schema:name"])return t["schema:author"]["schema:name"]};var De={};Object.defineProperty(De,"__esModule",{value:!0}),De.getDsSchemaVersion=void 0,De.getDsSchemaVersion=function(e){const t=(0,pe.getDsRootNode)(e);if(!t["schema:schemaVersion"])throw new Error("The given DS has no schema:schemaVersion for its root node, which is mandatory for a DS in DS-V5 format.");return(0,r.extractSdoVersionNumber)(t["schema:schemaVersion"])};var Se={};Object.defineProperty(Se,"__esModule",{value:!0}),Se.getDsVersion=void 0,Se.getDsVersion=function(e){return(0,pe.getDsRootNode)(e)["schema:version"]};var be={};Object.defineProperty(be,"__esModule",{value:!0}),be.getDsExternalVocabularies=void 0,be.getDsExternalVocabularies=function(e){const t=(0,pe.getDsRootNode)(e);return t["ds:usedVocabularies"]?(0,n.cloneJson)(t["ds:usedVocabularies"]):[]};var Ne={};Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.getDsTargetClasses=void 0,Ne.getDsTargetClasses=function(e){const t=(0,pe.getDsRootNode)(e);if(!t["sh:targetClass"])throw new Error("The given DS has no sh:targetClass in its root node, which is mandatory for a DS in DS-V5 format.");return Array.isArray(t["sh:targetClass"])?(0,n.cloneJson)(t["sh:targetClass"]):(0,n.cloneJson)([t["sh:targetClass"]])};var xe={};Object.defineProperty(xe,"__esModule",{value:!0}),xe.DsUtilitiesV5=void 0,xe.DsUtilitiesV5=class extends a.DsUtilitiesBase{constructor(){super(),this.dsUtilitiesVersion="5.0",this.getDsRootNode=pe.getDsRootNode,this.getDsStandardContext=ue.getDsStandardContext,this.getDsId=ye.getDsId,this.getDsDataTypeForSchemaDataType=me.getDsDataTypeForSchemaDataType,this.getSchemaDataTypeForDsDataType=fe.getSchemaDataTypeForDsDataType,this.getDsName=Te.getDsName,this.getDsDescription=ge.getDsDescription,this.getDsAuthorName=ve.getDsAuthorName,this.getDsSchemaVersion=De.getDsSchemaVersion,this.getDsVersion=Se.getDsVersion,this.getDsExternalVocabularies=be.getDsExternalVocabularies,this.getDsTargetClasses=Ne.getDsTargetClasses}};var Ee={};Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.getDsUtilitiesForDs=Ee.getDsUtilitiesForDsSpecVersion=Ee.availableVersions=void 0;const we={"7.0":he.DsUtilitiesV7,"5.0":xe.DsUtilitiesV5};function _e(e){if(!Object.keys(we).includes(e))throw new Error("The given DS Specification Version "+e+" is unknown to DsUtilities.");return new we[e]}return Ee.availableVersions=we,Ee.getDsUtilitiesForDsSpecVersion=_e,Ee.getDsUtilitiesForDs=function(t){return _e((0,e.getDsSpecificationVersion)(t))},Ee}));