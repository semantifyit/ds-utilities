!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).DsUtil=e()}}((function(){var e={};Object.defineProperty(e,"__esModule",{value:!0}),e.getDsSpecificationVersion=void 0,e.getDsSpecificationVersion=function(e){if(!Array.isArray(e["@graph"]))throw new Error("The given DS has no @graph array, which is expected for any DS version.");try{const t=e["@graph"].find(e=>"ds:DomainSpecification"===e["@type"]);if(t)return t["ds:version"]}catch(t){}try{if(e["@graph"].find(e=>Array.isArray(e["@type"])&&e["@type"].includes("sh:NodeShape")&&e["@type"].includes("schema:CreativeWork")))return"5.0"}catch(t){}throw new Error("The DS specification version for the given DS could not been determined - the DS has an unexpected structure.")};var t={};Object.defineProperty(t,"__esModule",{value:!0}),t.prettyPrintCompactedIRIs=void 0,t.prettyPrintCompactedIRIs=function e(t){return Array.isArray(t)?t.map(e).join(" + "):t.startsWith("schema:")?t.substring("schema:".length):t};var r={};Object.defineProperty(r,"__esModule",{value:!0}),r.extractSdoVersionNumber=void 0,r.extractSdoVersionNumber=function(e){if(e.includes("schema.org/docs/")){let t=/.*schema\.org\/docs\/releases\.html#v([0-9.]+)(\/)?/g.exec(e);if(t&&t[1])return t[1]}else if(e.includes("schema.org/version/")){let t=/.*schema\.org\/version\/([0-9.]+)(\/)?/g.exec(e);if(t&&t[1])return t[1]}throw new Error("The given url did not fit the expected format for a schema.org version url.")};var a={};Object.defineProperty(a,"__esModule",{value:!0}),a.DsUtilitiesBase=void 0,a.DsUtilitiesBase=class{constructor(){this.getDsSpecificationVersion=e.getDsSpecificationVersion,this.prettyPrintCompactedIRIs=t.prettyPrintCompactedIRIs,this.extractSdoVersionNumber=r.extractSdoVersionNumber}getDsUtilitiesVersion(){return this.dsUtilitiesVersion}};var s={};Object.defineProperty(s,"__esModule",{value:!0}),s.getDsRootNode=void 0,s.getDsRootNode=function(e){if(!e["@graph"])throw new Error("The given DS has no @graph array, which is mandatory for a DS in DS-V7 format.");const t=e["@graph"].find(e=>"ds:DomainSpecification"===e["@type"]);if(!t)throw new Error("The given DS has no identifiable root node in DS-V7 format.");return t};var o={};Object.defineProperty(o,"__esModule",{value:!0}),o.getDsId=void 0,o.getDsId=function(e){const t=(0,s.getDsRootNode)(e);if(!t["@id"])throw new Error("The given DS has no @id for its root node, which is mandatory for a DS in DS-V7 format.");return t["@id"]};var n={};function i(e){return void 0===e?e:JSON.parse(JSON.stringify(e))}function d(e){return e instanceof Object&&!(e instanceof Array)}Object.defineProperty(n,"__esModule",{value:!0}),n.isObject=n.deepEqual=n.reorderNodeWithSchema=n.getLanguageString=n.cloneJson=void 0,n.cloneJson=i,n.getLanguageString=function(e,t){if(!Array.isArray(e))throw new Error("Given valuesArray parameter is not an array, as expected");if(t){const r=e.find(e=>e["@language"]===t);if(r&&r["@value"])return r["@value"]}else if(e[0]&&e[0]["@value"])return e[0]["@value"]},n.reorderNodeWithSchema=function(e,t){const r=i(e);for(const a of Object.keys(e))delete e[a];for(const a of t){const t=a.term;void 0!==r[t]&&(e[t]=r[t])}for(const a of Object.keys(r))void 0===t.find(e=>e.term===a)&&(e[a]=r[a])},n.deepEqual=function e(t,r){const a=Object.keys(t),s=Object.keys(r);if(a.length!==s.length)return!1;for(const o of a){const a=t[o],s=r[o],n=d(a)&&d(s);if(n&&!e(a,s)||!n&&a!==s)return!1}return!0},n.isObject=d;var h={};Object.defineProperty(h,"__esModule",{value:!0}),h.getDsName=void 0,h.getDsName=function(e,t){const r=(0,s.getDsRootNode)(e);if(r["schema:name"])return(0,n.getLanguageString)(r["schema:name"],t)};var p={};Object.defineProperty(p,"__esModule",{value:!0}),p.standardContext=void 0,p.standardContext={ds:"https://vocab.sti2.at/ds/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"https://schema.org/",sh:"http://www.w3.org/ns/shacl#",xsd:"http://www.w3.org/2001/XMLSchema#","ds:propertyDisplayOrder":{"@container":"@list","@type":"@id"},"ds:subDSOf":{"@type":"@id"},"ds:usedVocabulary":{"@type":"@id"},"sh:targetClass":{"@type":"@id"},"sh:targetObjectsOf":{"@type":"@id"},"sh:targetSubjectsOf":{"@type":"@id"},"sh:class":{"@type":"@id"},"sh:path":{"@type":"@id"},"sh:datatype":{"@type":"@id"},"sh:equals":{"@type":"@id"},"sh:disjoint":{"@type":"@id"},"sh:lessThan":{"@type":"@id"},"sh:lessThanOrEquals":{"@type":"@id"},"sh:in":{"@container":"@list"},"sh:languageIn":{"@container":"@list"},"sh:or":{"@container":"@list"}};var c={};Object.defineProperty(c,"__esModule",{value:!0}),c.getDsStandardContext=void 0,c.getDsStandardContext=function(){return(0,n.cloneJson)(p.standardContext)};var u={};Object.defineProperty(u,"__esModule",{value:!0}),u.getDsDescription=void 0,u.getDsDescription=function(e,t){const r=(0,s.getDsRootNode)(e);if(r["schema:description"])return(0,n.getLanguageString)(r["schema:description"],t)};var y={};Object.defineProperty(y,"__esModule",{value:!0}),y.getDsAuthorName=void 0,y.getDsAuthorName=function(e){const t=(0,s.getDsRootNode)(e);if(t["schema:author"]&&t["schema:author"]["schema:name"])return t["schema:author"]["schema:name"]};var l={};Object.defineProperty(l,"__esModule",{value:!0}),l.getDsSchemaVersion=void 0,l.getDsSchemaVersion=function(e){const t=(0,s.getDsRootNode)(e);if(!t["schema:schemaVersion"])throw new Error("The given DS has no schema:schemaVersion for its root node, which is mandatory for a DS in DS-V7 format.");return t["schema:schemaVersion"]};var m={};Object.defineProperty(m,"__esModule",{value:!0}),m.getDsVersion=void 0,m.getDsVersion=function(e){const t=(0,s.getDsRootNode)(e);if(t["schema:version"])return t["schema:version"]};var f={};Object.defineProperty(f,"__esModule",{value:!0}),f.getDsExternalVocabularies=void 0,f.getDsExternalVocabularies=function(e){const t=(0,s.getDsRootNode)(e);return t["ds:usedVocabulary"]?(0,n.cloneJson)(t["ds:usedVocabulary"]):[]};var g={};Object.defineProperty(g,"__esModule",{value:!0}),g.getDsTargetClasses=void 0,g.getDsTargetClasses=function(e){const t=(0,s.getDsRootNode)(e);return t["sh:targetClass"]?(0,n.cloneJson)(t["sh:targetClass"]):[]};let{urlAlphabet:T}={urlAlphabet:"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"},v=e=>crypto.getRandomValues(new Uint8Array(e));var D={customAlphabet:(e,t=21)=>((e,t,r)=>{let a=(2<<Math.log(e.length-1)/Math.LN2)-1,s=-~(1.6*a*t/e.length);return(o=t)=>{let n="";for(;;){let t=r(s),i=s;for(;i--;)if((n+=e[t[i]&a]||"").length===o)return n}}})(e,t,v)},S={};Object.defineProperty(S,"__esModule",{value:!0}),S.generateInnerNodeId=void 0;const{customAlphabet:b}=D;S.generateInnerNodeId=function(e){let t,r;e&&(t=(0,o.getDsId)(e));const a=b("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",5);do{r=a()}while(void 0!==e&&JSON.stringify(e).includes(t+"#"+r));return r};var N={};Object.defineProperty(N,"__esModule",{value:!0}),N.nodeSchemaRoot=void 0,N.nodeSchemaRoot=[{term:"@id",required:!0,valueType:"string"},{term:"@type",required:!0,valueType:"string",value:"ds:DomainSpecification"},{term:"ds:subDSOf",required:!1,valueType:"string"},{term:"sh:targetClass",required:!1,valueType:"array"},{term:"sh:targetObjectsOf",required:!1,valueType:"string"},{term:"sh:targetSubjectsOf",required:!1,valueType:"string"},{term:"sh:class",required:!1,valueType:"array"},{term:"schema:name",required:!1,valueType:"array"},{term:"schema:description",required:!1,valueType:"array"},{term:"schema:author",required:!1,valueType:"object"},{term:"ds:version",required:!0,valueType:"string"},{term:"schema:version",required:!1,valueType:"string"},{term:"schema:schemaVersion",required:!0,valueType:"string"},{term:"ds:usedVocabulary",required:!1,valueType:"array"},{term:"sh:closed",required:!1,valueType:"boolean"},{term:"ds:propertyDisplayOrder",required:!1,valueType:"array"},{term:"sh:property",required:!0,valueType:"array"}];var x={};Object.defineProperty(x,"__esModule",{value:!0}),x.nodeSchemaProperty=void 0,x.nodeSchemaProperty=[{term:"@type",required:!0,valueType:"string",value:"sh:PropertyShape"},{term:"sh:order",required:!1,valueType:"integer"},{term:"sh:path",required:!0,valueType:"string"},{term:"rdfs:label",required:!1,valueType:"array"},{term:"rdfs:comment",required:!1,valueType:"array"},{term:"sh:minCount",required:!1,valueType:"integer"},{term:"sh:maxCount",required:!1,valueType:"integer"},{term:"sh:equals",required:!1,valueType:"array"},{term:"sh:disjoint",required:!1,valueType:"array"},{term:"sh:lessThan",required:!1,valueType:"array"},{term:"sh:lessThanOrEquals",required:!1,valueType:"array"},{term:"sh:or",required:!0,valueType:"array"}];var E={};Object.defineProperty(E,"__esModule",{value:!0}),E.nodeSchemaEnumeration=void 0,E.nodeSchemaEnumeration=[{term:"@id",required:!0,valueType:"string"},{term:"@type",required:!0,valueType:"string",value:"sh:NodeShape"},{term:"sh:class",required:!0,valueType:"array"},{term:"rdfs:label",required:!1,valueType:"array"},{term:"rdfs:comment",required:!1,valueType:"array"},{term:"sh:in",required:!1,valueType:"array"}];var w={};Object.defineProperty(w,"__esModule",{value:!0}),w.nodeSchemaClass=void 0,w.nodeSchemaClass=[{term:"@id",required:!0,valueType:"string"},{term:"@type",required:!0,valueType:"string",value:"sh:NodeShape"},{term:"sh:class",required:!0,valueType:"array"},{term:"rdfs:label",required:!1,valueType:"array"},{term:"rdfs:comment",required:!1,valueType:"array"},{term:"sh:closed",required:!1,valueType:"boolean"},{term:"ds:propertyDisplayOrder",required:!1,valueType:"array"},{term:"sh:property",required:!1,valueType:"array"}];var _={};Object.defineProperty(_,"__esModule",{value:!0}),_.nodeSchemaDs=void 0,_.nodeSchemaDs=[{term:"@context",required:!0,valueType:"object"},{term:"@graph",required:!0,valueType:"array"}];var P={};Object.defineProperty(P,"__esModule",{value:!0}),P.nodeSchemaContext=void 0,P.nodeSchemaContext=function(){const e=[];for(const t of Object.keys(p.standardContext)){const r={term:t,required:!0,valueType:"string"};"string"!=typeof p.standardContext[t]&&(r.valueType="object"),r.value=p.standardContext[t],e.push(r)}return e}();var O={};Object.defineProperty(O,"__esModule",{value:!0}),O.nodeSchemaDataType=void 0,O.nodeSchemaDataType=[{term:"sh:datatype",required:!0,valueType:"string",valueIn:["xsd:string","rdf:langString","rdf:HTML","xsd:boolean","xsd:date","xsd:dateTime","xsd:time","xsd:double","xsd:integer","xsd:float","xsd:anyURI"]},{term:"rdfs:label",required:!1,valueType:"array"},{term:"rdfs:comment",required:!1,valueType:"array"},{term:"sh:defaultValue",required:!1,valueType:"any"},{term:"ds:defaultLanguage",required:!1,valueType:"string"},{term:"sh:minExclusive",required:!1,valueType:"any"},{term:"sh:minInclusive",required:!1,valueType:"any"},{term:"sh:maxExclusive",required:!1,valueType:"any"},{term:"sh:maxInclusive",required:!1,valueType:"any"},{term:"sh:minLength",required:!1,valueType:"integer"},{term:"sh:maxLength",required:!1,valueType:"integer"},{term:"sh:pattern",required:!1,valueType:"array"},{term:"sh:flag",required:!1,valueType:"string"},{term:"sh:languageIn",required:!1,valueType:"array"},{term:"ds:hasLanguage",required:!1,valueType:"array"},{term:"sh:uniqueLang",required:!1,valueType:"boolean"},{term:"sh:in",required:!1,valueType:"array"},{term:"sh:hasValue",required:!1,valueType:"array"}];var G={};Object.defineProperty(G,"__esModule",{value:!0}),G.nodeSchemaLanguageTaggedString=void 0,G.nodeSchemaLanguageTaggedString=[{term:"@language",required:!0,valueType:"string"},{term:"@value",required:!0,valueType:"string"}];var j={};Object.defineProperty(j,"__esModule",{value:!0}),j.nodeSchemaEnumerationMember=void 0,j.nodeSchemaEnumerationMember=[{term:"@id",required:!0,valueType:"string"},{term:"rdfs:label",required:!1,valueType:"array"},{term:"rdfs:comment",required:!1,valueType:"array"}];var M={};Object.defineProperty(M,"__esModule",{value:!0}),M.reorderDsNode=void 0,M.reorderDsNode=function(e){if(!(0,n.isObject)(e))throw new Error("The given input was not an object, as required.");if(e["@type"])switch(e["@type"]){case"ds:DomainSpecification":(0,n.reorderNodeWithSchema)(e,N.nodeSchemaRoot);break;case"sh:PropertyShape":(0,n.reorderNodeWithSchema)(e,x.nodeSchemaProperty);break;case"sh:NodeShape":e["sh:in"]?(0,n.reorderNodeWithSchema)(e,E.nodeSchemaEnumeration):(0,n.reorderNodeWithSchema)(e,w.nodeSchemaClass)}else e["@context"]?(0,n.reorderNodeWithSchema)(e,_.nodeSchemaDs):e.ds&&e.schema&&e.sh?(0,n.reorderNodeWithSchema)(e,P.nodeSchemaContext):e["sh:datatype"]?(0,n.reorderNodeWithSchema)(e,O.nodeSchemaDataType):e["sh:node"]||(e["@value"]?(0,n.reorderNodeWithSchema)(e,G.nodeSchemaLanguageTaggedString):e["@id"]&&(0,n.reorderNodeWithSchema)(e,j.nodeSchemaEnumerationMember))};var q={};Object.defineProperty(q,"__esModule",{value:!0}),q.dsGrammarNodeTypes=void 0,q.dsGrammarNodeTypes={ds:"DomainSpecification",context:"Context",root:"RootNode",classStandard:"StandardClass",classRestricted:"RestrictedClass",enumerationStandard:"StandardEnumeration",enumerationRestricted:"RestrictedEnumeration",property:"Property",dataType:"DataType",enumerationMember:"EnumerationMember",reference:"Reference"};var I={};function R(e,t,r,a){const o=t.split("/"),n=e.find(e=>e["sh:path"]===o[0]);if(!n)throw new Error("Could not find a fitting property-node for path-token "+o[0]);return 1===o.length?n:function(e,t,r,a){const o=(0,s.getDsRootNode)(r),n=t.split("."),i=n[0];let d,h;if(i.startsWith("@")?"@$"===i?(d=e.find(e=>e["sh:node"]&&e["sh:node"]["@id"]===o["@id"]),h=o):i.startsWith("@#")?(d=e.find(e=>e["sh:node"]&&e["sh:node"]["@id"]===o["@id"]+i.substring(1)))&&(h=r["@graph"].find(e=>e["@id"]===d["sh:node"]["@id"])):(d=e.find(e=>e["sh:node"]&&e["sh:node"]["@id"].endsWith(i.substring(1))))&&(h=r["@graph"].find(e=>e["@id"]===d["sh:node"]["@id"])):d=e.find(e=>{return e["sh:datatype"]===n[0]||e["sh:node"]&&e["sh:node"]["sh:class"]&&(t=e["sh:node"]["sh:class"],r=n[0].split(","),!t.find(e=>!r.includes(e))&&!r.find(e=>!t.includes(e)))||e["sh:node"]&&e["sh:node"]["@id"].endsWith(n[0].substring(1));var t,r}),!d)throw new Error("Could not find a fitting range-node for path-token "+n[0]);return 1===n.length?a&&h?h:d["sh:node"]?d["sh:node"]:d:R(h?h["sh:property"]:d["sh:node"]["sh:property"],t.substring(n[0].length+1),r,a)}(n["sh:or"],t.substring(o[0].length+1),r,a)}Object.defineProperty(I,"__esModule",{value:!0}),I.dsPathGetNode=void 0,I.dsPathGetNode=function(e,t,r=!1){if("@context"===t){if(!e["@context"])throw new Error("The given DS has no @context, which is mandatory for a DS in DS-V7 format.");return e["@context"]}if(t.startsWith("$")){const a=(0,s.getDsRootNode)(e);return"$"===t?a:R(a["sh:property"],t.substring(2),e,r)}{const a=t.split("."),s=e["@graph"].find(e=>e["@id"].endsWith(a[0]));if(!s)throw new Error("Could not find a fitting reference definition for path-token "+a[0]);return 1===a.length?s:R(s["sh:property"],t.substring(a[0].length+1),e,r)}};var V={};Object.defineProperty(V,"__esModule",{value:!0}),V.identifyDsGrammarNodeType=void 0,V.identifyDsGrammarNodeType=function e(t,r,a){const o=(0,s.getDsRootNode)(r),i=(0,I.dsPathGetNode)(r,"@context");if((0,n.deepEqual)(t,i))return q.dsGrammarNodeTypes.context;if((0,n.deepEqual)(t,o))return q.dsGrammarNodeTypes.root;if("sh:PropertyShape"===t["@type"])return q.dsGrammarNodeTypes.property;if(t["sh:datatype"])return q.dsGrammarNodeTypes.dataType;if("sh:NodeShape"===t["@type"]){if(t["sh:property"])return q.dsGrammarNodeTypes.classRestricted;if(t["sh:in"])return q.dsGrammarNodeTypes.enumerationRestricted;if(1!==t["sh:class"].length||!a)return q.dsGrammarNodeTypes.classStandard;try{return a.getEnumeration(t["sh:class"][0]),q.dsGrammarNodeTypes.enumerationStandard}catch(d){return q.dsGrammarNodeTypes.classStandard}}if(t["@id"]){const s=r["@graph"].find(e=>t["@id"]===e["@id"]);return s?e(s,r,a):q.dsGrammarNodeTypes.enumerationMember}throw new Error("Could not find a match for the given DS Node.")};var C={};function A(e){if((0,M.reorderDsNode)(e),W(e,"schema:name"),W(e,"schema:description"),W(e,"rdfs:label"),W(e,"rdfs:comment"),e["sh:property"])for(const t of e["sh:property"])k(t)}function k(e){(0,M.reorderDsNode)(e),W(e,"rdfs:label"),W(e,"rdfs:comment");for(const t of e["sh:or"])(0,M.reorderDsNode)(t),W(t,"rdfs:label"),W(t,"rdfs:comment"),t["sh:node"]&&A(t["sh:node"])}function W(e,t){e[t]&&function(e){for(const t of e)(0,n.reorderNodeWithSchema)(t,G.nodeSchemaLanguageTaggedString)}(e[t])}Object.defineProperty(C,"__esModule",{value:!0}),C.reorderDs=void 0,C.reorderDs=function(e){if(!(0,n.isObject)(e))throw new Error("The given input was not an object, as required.");(0,n.reorderNodeWithSchema)(e,_.nodeSchemaDs),(0,n.reorderNodeWithSchema)(e["@context"],P.nodeSchemaContext);const t=e["@graph"].findIndex(e=>"ds:DomainSpecification"===e["@type"]);0!==t&&(e["@graph"]=[e["@graph"][t],...e["@graph"].slice(0,t),...e["@graph"].slice(t+1)]);for(const r of e["@graph"])A(r)};var L={};Object.defineProperty(L,"__esModule",{value:!0}),L.dataTypeMappingToLabel=L.dataTypeMapping=L.dataTypesDs=L.dataTypesSchema=void 0,L.dataTypesSchema={text:"schema:Text",url:"schema:URL",number:"schema:Number",integer:"schema:Integer",float:"schema:Float",boolean:"schema:Boolean",time:"schema:Time",date:"schema:Date",dateTime:"schema:DateTime"},L.dataTypesDs={string:"xsd:string",langString:"rdf:langString",url:"xsd:anyURI",html:"rdf:HTML",double:"xsd:double",integer:"xsd:integer",float:"xsd:float",boolean:"xsd:boolean",time:"xsd:time",date:"xsd:date",dateTime:"xsd:dateTime"},L.dataTypeMapping={[L.dataTypesDs.string]:L.dataTypesSchema.text,[L.dataTypesDs.langString]:L.dataTypesSchema.text,[L.dataTypesDs.html]:L.dataTypesSchema.text,[L.dataTypesDs.boolean]:L.dataTypesSchema.boolean,[L.dataTypesDs.date]:L.dataTypesSchema.date,[L.dataTypesDs.dateTime]:L.dataTypesSchema.dateTime,[L.dataTypesDs.time]:L.dataTypesSchema.time,[L.dataTypesDs.double]:L.dataTypesSchema.number,[L.dataTypesDs.integer]:L.dataTypesSchema.integer,[L.dataTypesDs.float]:L.dataTypesSchema.float,[L.dataTypesDs.url]:L.dataTypesSchema.url},L.dataTypeMappingToLabel={[L.dataTypesDs.string]:"Text",[L.dataTypesDs.langString]:"Localized Text",[L.dataTypesDs.html]:"HTML Text",[L.dataTypesDs.boolean]:"Boolean",[L.dataTypesDs.date]:"Date",[L.dataTypesDs.dateTime]:"DateTime",[L.dataTypesDs.time]:"Time",[L.dataTypesDs.double]:"Number",[L.dataTypesDs.integer]:"Integer",[L.dataTypesDs.float]:"Float",[L.dataTypesDs.url]:"URL"};var U={};Object.defineProperty(U,"__esModule",{value:!0}),U.getDataTypeLabel=void 0,U.getDataTypeLabel=function(e){const t=L.dataTypeMappingToLabel[e];if(!t)throw new Error("Given input '"+e+"' is not a valid xsd/rdf datatype in DS-V7.");return t};var F={};Object.defineProperty(F,"__esModule",{value:!0}),F.getDsDataTypeForSchemaDataType=void 0,F.getDsDataTypeForSchemaDataType=function(e){const t=Object.keys(L.dataTypeMapping).find(t=>L.dataTypeMapping[t]===e);if(!t)throw new Error("Given input '"+e+"' is not a valid schema.org datatype in DS-V7.");return t};var J={};Object.defineProperty(J,"__esModule",{value:!0}),J.getSchemaDataTypeForDsDataType=void 0,J.getSchemaDataTypeForDsDataType=function(e){const t=L.dataTypeMapping[e];if(!t)throw new Error("Given input '"+e+"' is not a valid xsd/rdf datatype in DS-V7.");return t};var $={};Object.defineProperty($,"__esModule",{value:!0}),$.pathGrammarNodeTypes=$.pathGrammarNodeTypeDataType=$.pathGrammarNodeTypeEnumeration=$.pathGrammarNodeTypeClass=$.pathGrammarNodeTypeProperty=$.pathGrammarNodeTypeReferenceInternalExternal=$.pathGrammarNodeTypeReferenceExternal=$.pathGrammarNodeTypeReferenceInternal=$.pathGrammarNodeTypeReferenceRoot=$.pathGrammarNodeTypeDefinitionInternalExternal=$.pathGrammarNodeTypeDefinitionExternal=$.pathGrammarNodeTypeDefinitionInternal=$.pathGrammarNodeTypeRoot=$.pathGrammarNodeTypeContext=void 0,$.pathGrammarNodeTypeContext="Context",$.pathGrammarNodeTypeRoot="RootNode",$.pathGrammarNodeTypeDefinitionInternal="InternalReferenceDefinition",$.pathGrammarNodeTypeDefinitionExternal="ExternalReferenceDefinition",$.pathGrammarNodeTypeDefinitionInternalExternal="InternalExternalReferenceDefinition",$.pathGrammarNodeTypeReferenceRoot="RootReference",$.pathGrammarNodeTypeReferenceInternal="InternalReference",$.pathGrammarNodeTypeReferenceExternal="ExternalReference",$.pathGrammarNodeTypeReferenceInternalExternal="InternalExternalReference",$.pathGrammarNodeTypeProperty="Property",$.pathGrammarNodeTypeClass="Class",$.pathGrammarNodeTypeEnumeration="Enumeration",$.pathGrammarNodeTypeDataType="DataType",$.pathGrammarNodeTypes={context:$.pathGrammarNodeTypeContext,root:$.pathGrammarNodeTypeRoot,defInt:$.pathGrammarNodeTypeDefinitionInternal,defExt:$.pathGrammarNodeTypeDefinitionExternal,defIntExt:$.pathGrammarNodeTypeDefinitionInternalExternal,refRoot:$.pathGrammarNodeTypeReferenceRoot,refInt:$.pathGrammarNodeTypeReferenceInternal,refExt:$.pathGrammarNodeTypeReferenceExternal,refIntExt:$.pathGrammarNodeTypeReferenceInternalExternal,property:$.pathGrammarNodeTypeProperty,class:$.pathGrammarNodeTypeClass,enumeration:$.pathGrammarNodeTypeEnumeration,dataType:$.pathGrammarNodeTypeDataType};var B={};Object.defineProperty(B,"__esModule",{value:!0}),B.dsPathInit=void 0,B.dsPathInit=function(e=$.pathGrammarNodeTypes.root,t){switch(e){case $.pathGrammarNodeTypes.root:return"$";case $.pathGrammarNodeTypes.defInt:return"#"+t.split("#")[1];case $.pathGrammarNodeTypes.defExt:case $.pathGrammarNodeTypes.defIntExt:return t.split("/").pop();case $.pathGrammarNodeTypes.context:return"@context";default:throw new Error("Unknown node type to initialize a DS Path: "+e)}};var z={};Object.defineProperty(z,"__esModule",{value:!0}),z.dsPathAddition=void 0,z.dsPathAddition=function(e,t,r){if(t===$.pathGrammarNodeTypes.property)return e+"."+r;if(t===$.pathGrammarNodeTypes.dataType)return e+"/"+r;if(t===$.pathGrammarNodeTypes.class||t===$.pathGrammarNodeTypes.enumeration)return e+"/"+r.join(",");if(t===$.pathGrammarNodeTypes.refRoot)return e+"/@$";if(t===$.pathGrammarNodeTypes.refInt)return e+"/@#"+r.split("#")[1];if(t===$.pathGrammarNodeTypes.refExt)return e+"/@"+r.split("/").pop();if(t===$.pathGrammarNodeTypes.refIntExt)return e+"/@"+r.split("/").pop();throw new Error("Given additionType '"+t+"' unknown to function dsPathAddition().")};var H={};Object.defineProperty(H,"__esModule",{value:!0}),H.dsPathIdentifyNodeType=void 0,H.dsPathIdentifyNodeType=function(e,t){const r=(0,s.getDsRootNode)(t),a=(0,I.dsPathGetNode)(t,"@context");if((0,n.deepEqual)(e,a))return $.pathGrammarNodeTypes.context;if(e["@id"]&&1===Object.keys(e).length)return e["@id"]===r["@id"]?$.pathGrammarNodeTypes.refRoot:e["@id"].startsWith(r["@id"])?$.pathGrammarNodeTypes.refInt:"#"===e["@id"].charAt(e["@id"].length-6)?$.pathGrammarNodeTypes.refIntExt:$.pathGrammarNodeTypes.refExt;if("ds:DomainSpecification"===e["@type"])return $.pathGrammarNodeTypes.root;if("sh:NodeShape"===e["@type"]&&void 0!==t["@graph"].find(t=>t["@id"]===e["@id"]))return e["@id"].startsWith(r["@id"])?$.pathGrammarNodeTypes.defInt:"#"===e["@id"].charAt(e["@id"].length-6)?$.pathGrammarNodeTypes.defIntExt:$.pathGrammarNodeTypes.defExt;if("sh:PropertyShape"===e["@type"])return $.pathGrammarNodeTypes.property;if(void 0!==e["sh:datatype"])return $.pathGrammarNodeTypes.dataType;if("sh:NodeShape"===e["@type"]&&void 0!==e["sh:in"])return $.pathGrammarNodeTypes.enumeration;if("sh:NodeShape"===e["@type"]&&void 0!==e["sh:property"])return $.pathGrammarNodeTypes.class;if("sh:NodeShape"===e["@type"]&&void 0!==e["sh:class"])return $.pathGrammarNodeTypes.class;throw new Error("Could not identify a valid Path Grammar Node Type for the given input.")};var X={};function K(e,r,a,s){const o=(0,I.dsPathGetNode)(e,a,!0),n=(0,I.dsPathGetNode)(e,a,!1),i=(0,V.identifyDsGrammarNodeType)(o,e),d=(0,H.dsPathIdentifyNodeType)(n,e);let h;return{token:r,label:h="@context"===r?"@context":d===$.pathGrammarNodeTypes.property?(0,t.prettyPrintCompactedIRIs)(o["sh:path"]):d===$.pathGrammarNodeTypes.dataType?(0,U.getDataTypeLabel)(o["sh:datatype"]):(0,t.prettyPrintCompactedIRIs)(o["sh:class"]),grammarNodeType:i,dsPathNodeType:d,currentPath:a,restPath:s}}Object.defineProperty(X,"__esModule",{value:!0}),X.tokenizeDsPath=void 0,X.tokenizeDsPath=function(e,t){let r="",a=t,s=[];for(;""!==a;){let o;if(a===t&&a.startsWith("$"))o="$";else if(a===t&&a.startsWith("@context"))o="@context";else if(a===t&&a.startsWith("#")){let e=a.indexOf(".");o=a.substring(0,-1!==e?e:void 0)}else if(a!==t||t.startsWith("#")||t.startsWith("@")||t.startsWith("$"))if(a.startsWith(".")){let e=a.indexOf("/");o=a.substring(0,-1!==e?e:void 0)}else{if(!a.startsWith("/"))throw new Error("Could not find a valid token match for '"+a+"'.");{let e=a.indexOf(".");o=a.substring(0,-1!==e?e:void 0)}}else{let e=a.indexOf(".");o=a.substring(0,-1!==e?e:void 0)}r+=o,a=a.substring(o.length),s.push(K(e,o,r,a))}return s};var Q={};Object.defineProperty(Q,"__esModule",{value:!0}),Q.VerificationReport=void 0,Q.VerificationReport=class{constructor(e="Valid",t=[]){this.result=e,this.errors=t}addErrorEntry(e){this.errors.push(e),this.updateResult()}updateResult(){if(this.errors.find(e=>"Error"===e.severity||"Critical"===e.severity))this.result="Invalid";else{const e=this.errors.find(e=>"Warning"===e.severity);this.result=e?"ValidWithWarnings":"Valid"}}toJson(){return JSON.parse(JSON.stringify(this))}};var Y={};Object.defineProperty(Y,"__esModule",{value:!0}),Y.ErrorEntry=void 0,Y.ErrorEntry=class{constructor(e,t,r){this.severity=e,this.path=t,this.description=r}};var Z={};function ee(e,t,r,a,s,o){let n;if(se(r,a,t,n=o?ie(N.nodeSchemaRoot,s.nodeSchemaRoot):ie(w.nodeSchemaClass,s.nodeSchemaClass)),Array.isArray(t["sh:property"]))for(const i of t["sh:property"])re(e,i,r,(0,z.dsPathAddition)(a,$.pathGrammarNodeTypes.property,i["sh:path"]),s)}function te(e,t,r,a,s){if(se(r,a,t,ie(E.nodeSchemaEnumeration,s.nodeSchemaEnumeration)),Array.isArray(t["sh:in"]))for(const o of t["sh:in"])if((0,n.isObject)(o)){void 0===o["@id"]?r.addErrorEntry(new Y.ErrorEntry("Error",a,"An enumeration value has no '@id'.")):"string"!=typeof o["@id"]&&r.addErrorEntry(new Y.ErrorEntry("Error",a,"An enumeration value has an '@id' that is not a string."));for(const e of Object.keys(o))"@id"!==e&&r.addErrorEntry(new Y.ErrorEntry("Warning",a,"Additional term '"+e+" is being used."))}else r.addErrorEntry(new Y.ErrorEntry("Error",a,"An enumeration has an unexpected entry for 'sh:in'."))}function re(e,t,r,a,s){if(se(r,a,t,ie(x.nodeSchemaProperty,s.nodeSchemaProperty)),Array.isArray(t["sh:or"]))for(const n of t["sh:or"]){let t,i,d;switch(n["sh:node"]?(t=(0,H.dsPathIdentifyNodeType)(n["sh:node"],e),i=n["sh:node"]):(t=(0,H.dsPathIdentifyNodeType)(n,e),i=n),t){case $.pathGrammarNodeTypes.class:try{d=(0,z.dsPathAddition)(a,t,i["sh:class"])}catch(o){d=a}ee(e,i,r,d,s,!1);break;case $.pathGrammarNodeTypes.enumeration:try{d=(0,z.dsPathAddition)(a,t,i["sh:class"])}catch(o){d=a}te(0,i,r,d,s);break;case $.pathGrammarNodeTypes.dataType:try{d=(0,z.dsPathAddition)(a,t,i["sh:datatype"])}catch(o){d=a}ae(e,i,r,d,s)}}}function ae(e,t,r,a,s){se(r,a,t,ie(O.nodeSchemaDataType,s.nodeSchemaDataType))}function se(e,t,r,a){for(const o of a)if(o.required&&void 0===r[o.term])e.addErrorEntry(new Y.ErrorEntry("Error",t,"Term '"+o.term+"' is required but not used."));else if(void 0!==r[o.term]){const a=ne(r[o.term]);if(o.valueType&&"any"!==o.valueType&&a!==o.valueType){e.addErrorEntry(new Y.ErrorEntry("Error",t,"Term '"+o.term+"' requires a value with datatype '"+o.valueType+"', but has the datatype '"+a+"'."));continue}"array"===a&&0===r[o.term].length&&e.addErrorEntry(new Y.ErrorEntry("Error",t,"Term '"+o.term+"' has an empty array as value.")),o.value&&!oe(r[o.term],o.value)&&e.addErrorEntry(new Y.ErrorEntry("Error",t,"Term '"+o.term+"' requires the value '"+de(o.value)+"', but has the value '"+de(r[o.term])+"'.")),o.valueIn&&!o.valueIn.includes(r[o.term])&&e.addErrorEntry(new Y.ErrorEntry("Error",t,"Term '"+o.term+"' must have a value from an expected set, which does not include the given value '"+de(r[o.term])+"'."))}const s=Object.keys(r).filter(e=>!a.find(t=>t.term===e));for(const o of s)e.addErrorEntry(new Y.ErrorEntry("Warning",t,"Additional term '"+o+" is being used."))}function oe(e,t){if((0,n.isObject)(e)){if(!function(e,t){const r=Object.keys(e).filter(e=>!Object.keys(t).includes(e)),a=Object.keys(t).filter(t=>!Object.keys(e).includes(t));return 0===r.length&&0===a.length}(e,t))return!1;for(const r of Object.keys(e))if(!oe(e[r],t[r]))return!1;return!0}return e===t}function ne(e){if(Array.isArray(e))return"array";{let t=typeof e;return"number"===t&&Number.isInteger(e)?"integer":t}}function ie(e,t){let r=(0,n.cloneJson)(e);if(!t)return r;for(const a of t)(r=r.filter(e=>e.term!==a.term)).push((0,n.cloneJson)(a));return r}function de(e){let t=(0,n.cloneJson)(e);return"string"!=typeof t&&(t=(t=JSON.stringify(t)).replace(/"/g,"'")),t}Object.defineProperty(Z,"__esModule",{value:!0}),Z.verifyDs=void 0,Z.verifyDs=function(e,t={}){const r=new Q.VerificationReport;try{(0,n.isObject)(e)||r.addErrorEntry(new Y.ErrorEntry("Error","$","The given input was not an object, as required.")),se(r,null,e,ie(_.nodeSchemaDs,t.nodeSchemaDs)),(0,n.isObject)(e["@context"])&&se(r,"@context",e["@context"],ie(P.nodeSchemaContext,t.nodeSchemaContext));const a=(0,s.getDsRootNode)(e);ee(e,a,r,(0,B.dsPathInit)(),t,!0);for(const s of e["@graph"])s["@id"]!==a["@id"]&&ee(e,s,r,(0,B.dsPathInit)($.pathGrammarNodeTypes.defInt,s["@id"]),t,!1);return r.toJson()}catch(a){return r.addErrorEntry(new Y.ErrorEntry("Critical","$","There was a critical error during the verification: "+a)),r.toJson()}};var he={};Object.defineProperty(he,"__esModule",{value:!0}),he.checkClassMatch=void 0,he.checkClassMatch=function(e,t,r){const a=[];t.map(e=>a.push(e,...r.getClass(e).getSuperClasses()));const s=Array.from(new Set(a));return e.every(e=>s.includes(e))};var pe={};Object.defineProperty(pe,"__esModule",{value:!0}),pe.DsUtilitiesV7=void 0,pe.DsUtilitiesV7=class extends a.DsUtilitiesBase{constructor(){super(),this.dsUtilitiesVersion="7.0",this.getDsRootNode=s.getDsRootNode,this.getDsStandardContext=c.getDsStandardContext,this.getDsId=o.getDsId,this.reorderDs=C.reorderDs,this.reorderDsNode=M.reorderDsNode,this.generateInnerNodeId=S.generateInnerNodeId,this.getDsDataTypeForSchemaDataType=F.getDsDataTypeForSchemaDataType,this.getSchemaDataTypeForDsDataType=J.getSchemaDataTypeForDsDataType,this.identifyDsGrammarNodeType=V.identifyDsGrammarNodeType,this.dsPathInit=B.dsPathInit,this.dsPathAddition=z.dsPathAddition,this.dsPathGetNode=I.dsPathGetNode,this.dsPathIdentifyNodeType=H.dsPathIdentifyNodeType,this.tokenizeDsPath=X.tokenizeDsPath,this.getDsName=h.getDsName,this.getDsDescription=u.getDsDescription,this.getDsAuthorName=y.getDsAuthorName,this.getDsSchemaVersion=l.getDsSchemaVersion,this.getDsVersion=m.getDsVersion,this.getDsExternalVocabularies=f.getDsExternalVocabularies,this.getDsTargetClasses=g.getDsTargetClasses,this.getDataTypeLabel=U.getDataTypeLabel,this.verifyDs=Z.verifyDs,this.checkClassMatch=he.checkClassMatch}};var ce={};Object.defineProperty(ce,"__esModule",{value:!0}),ce.getDsRootNode=void 0,ce.getDsRootNode=function(e){if(!e["@graph"])throw new Error("The given DS has no @graph array, which is mandatory for a DS in DS-V5 format.");const t=e["@graph"].find(e=>Array.isArray(e["@type"])&&e["@type"].includes("sh:NodeShape")&&e["@type"].includes("schema:CreativeWork"));if(!t)throw new Error("The given DS has no identifiable root node in DS-V5 format.");return t};var ue={};Object.defineProperty(ue,"__esModule",{value:!0}),ue.standardContext=void 0,ue.standardContext={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",sh:"http://www.w3.org/ns/shacl#",xsd:"http://www.w3.org/2001/XMLSchema#",schema:"http://schema.org/","sh:targetClass":{"@id":"sh:targetClass","@type":"@id"},"sh:property":{"@id":"sh:property"},"sh:path":{"@id":"sh:path","@type":"@id"},"sh:datatype":{"@id":"sh:datatype","@type":"@id"},"sh:node":{"@id":"sh:node"},"sh:class":{"@id":"sh:class","@type":"@id"},"sh:or":{"@id":"sh:or","@container":"@list"},"sh:in":{"@id":"sh:in","@container":"@list"},"sh:languageIn":{"@id":"sh:languageIn","@container":"@list"},"sh:equals":{"@id":"sh:equals","@type":"@id"},"sh:disjoint":{"@id":"sh:disjoint","@type":"@id"},"sh:lessThan":{"@id":"sh:lessThan","@type":"@id"},"sh:lessThanOrEquals":{"@id":"sh:lessThanOrEquals","@type":"@id"},ds:"http://vocab.sti2.at/ds/","ds:usedVocabularies":{"@id":"ds:usedVocabularies","@type":"@id"}};var ye={};Object.defineProperty(ye,"__esModule",{value:!0}),ye.getDsStandardContext=void 0,ye.getDsStandardContext=function(){return(0,n.cloneJson)(ue.standardContext)};var le={};Object.defineProperty(le,"__esModule",{value:!0}),le.getDsId=void 0,le.getDsId=function(e){if(!e["@id"])throw new Error("The given DS has no @id, which is mandatory for a DS in DS-V5 format.");return e["@id"]};var me={};Object.defineProperty(me,"__esModule",{value:!0}),me.dataTypeMapping=me.dataTypesDs=me.dataTypesSchema=void 0,me.dataTypesSchema={text:"schema:Text",url:"schema:URL",number:"schema:Number",integer:"schema:Integer",float:"schema:Float",boolean:"schema:Boolean",time:"schema:Time",date:"schema:Date",dateTime:"schema:DateTime"},me.dataTypesDs={string:"xsd:string",url:"xsd:anyURI",double:"xsd:double",integer:"xsd:integer",float:"xsd:float",boolean:"xsd:boolean",time:"xsd:time",date:"xsd:date",dateTime:"xsd:dateTime"},me.dataTypeMapping={[me.dataTypesDs.string]:me.dataTypesSchema.text,[me.dataTypesDs.boolean]:me.dataTypesSchema.boolean,[me.dataTypesDs.date]:me.dataTypesSchema.date,[me.dataTypesDs.dateTime]:me.dataTypesSchema.dateTime,[me.dataTypesDs.time]:me.dataTypesSchema.time,[me.dataTypesDs.double]:me.dataTypesSchema.number,[me.dataTypesDs.integer]:me.dataTypesSchema.integer,[me.dataTypesDs.float]:me.dataTypesSchema.float,[me.dataTypesDs.url]:me.dataTypesSchema.url},me.dataTypesDs.string,me.dataTypesDs.boolean,me.dataTypesDs.date,me.dataTypesDs.dateTime,me.dataTypesDs.time,me.dataTypesDs.double,me.dataTypesDs.integer,me.dataTypesDs.float,me.dataTypesDs.url;var fe={};Object.defineProperty(fe,"__esModule",{value:!0}),fe.getDsDataTypeForSchemaDataType=void 0,fe.getDsDataTypeForSchemaDataType=function(e){const t=Object.keys(me.dataTypeMapping).find(t=>me.dataTypeMapping[t]===e);if(!t)throw new Error("Given input '"+e+"' is not a valid schema.org datatype in DS-V5.");return t};var ge={};Object.defineProperty(ge,"__esModule",{value:!0}),ge.getSchemaDataTypeForDsDataType=void 0,ge.getSchemaDataTypeForDsDataType=function(e){const t=me.dataTypeMapping[e];if(!t)throw new Error("Given input '"+e+"' is not a valid xsd/rdf datatype in DS-V5.");return t};var Te={};Object.defineProperty(Te,"__esModule",{value:!0}),Te.getDsDescription=void 0,Te.getDsDescription=function(e){return(0,ce.getDsRootNode)(e)["schema:description"]};var ve={};Object.defineProperty(ve,"__esModule",{value:!0}),ve.getDsName=void 0,ve.getDsName=function(e){return(0,ce.getDsRootNode)(e)["schema:name"]};var De={};Object.defineProperty(De,"__esModule",{value:!0}),De.getDsAuthorName=void 0,De.getDsAuthorName=function(e){const t=(0,ce.getDsRootNode)(e);if(t["schema:author"]&&t["schema:author"]["schema:name"])return t["schema:author"]["schema:name"]};var Se={};Object.defineProperty(Se,"__esModule",{value:!0}),Se.getDsSchemaVersion=void 0,Se.getDsSchemaVersion=function(e){const t=(0,ce.getDsRootNode)(e);if(!t["schema:schemaVersion"])throw new Error("The given DS has no schema:schemaVersion for its root node, which is mandatory for a DS in DS-V5 format.");return(0,r.extractSdoVersionNumber)(t["schema:schemaVersion"])};var be={};Object.defineProperty(be,"__esModule",{value:!0}),be.getDsVersion=void 0,be.getDsVersion=function(e){return(0,ce.getDsRootNode)(e)["schema:version"]};var Ne={};Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.getDsExternalVocabularies=void 0,Ne.getDsExternalVocabularies=function(e){const t=(0,ce.getDsRootNode)(e);return t["ds:usedVocabularies"]?(0,n.cloneJson)(t["ds:usedVocabularies"]):[]};var xe={};Object.defineProperty(xe,"__esModule",{value:!0}),xe.getDsTargetClasses=void 0,xe.getDsTargetClasses=function(e){const t=(0,ce.getDsRootNode)(e);if(!t["sh:targetClass"])throw new Error("The given DS has no sh:targetClass in its root node, which is mandatory for a DS in DS-V5 format.");return Array.isArray(t["sh:targetClass"])?(0,n.cloneJson)(t["sh:targetClass"]):(0,n.cloneJson)([t["sh:targetClass"]])};var Ee={};Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.DsUtilitiesV5=void 0,Ee.DsUtilitiesV5=class extends a.DsUtilitiesBase{constructor(){super(),this.dsUtilitiesVersion="5.0",this.getDsRootNode=ce.getDsRootNode,this.getDsStandardContext=ye.getDsStandardContext,this.getDsId=le.getDsId,this.getDsDataTypeForSchemaDataType=fe.getDsDataTypeForSchemaDataType,this.getSchemaDataTypeForDsDataType=ge.getSchemaDataTypeForDsDataType,this.getDsName=ve.getDsName,this.getDsDescription=Te.getDsDescription,this.getDsAuthorName=De.getDsAuthorName,this.getDsSchemaVersion=Se.getDsSchemaVersion,this.getDsVersion=be.getDsVersion,this.getDsExternalVocabularies=Ne.getDsExternalVocabularies,this.getDsTargetClasses=xe.getDsTargetClasses}};var we={};Object.defineProperty(we,"__esModule",{value:!0}),we.getDsUtilitiesForDs=we.getDsUtilitiesForDsSpecVersion=we.availableVersions=void 0;const _e={"7.0":pe.DsUtilitiesV7,"5.0":Ee.DsUtilitiesV5};function Pe(e){if(!Object.keys(_e).includes(e))throw new Error("The given DS Specification Version "+e+" is unknown to DsUtilities.");return new _e[e]}return we.availableVersions=_e,we.getDsUtilitiesForDsSpecVersion=Pe,we.getDsUtilitiesForDs=function(t){return Pe((0,e.getDsSpecificationVersion)(t))},we}));